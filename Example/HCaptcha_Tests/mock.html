<html>
  <head>
    <meta name="viewport" content="width=device-width" />
    <script type="text/javascript">
      var key = "${apiKey}";
      var endpoint = "${endpoint}";
      var shouldFail = ${shouldFail};
      var rqdata = "${rqdata}";
      var theme = ${theme}; // don't used but need to make sure that template is correctly handle it

      var post = function(value) {
          window.webkit.messageHandlers.hcaptcha.postMessage(value);
      };

      var execute = function() {
          if (shouldFail) {
              post("error");
          } else {
              if (rqdata) {
                  post({"log": rqdata});
              }
              post(${message});
          }
      };

      var reset = function() {
          shouldFail = false;
          post({ action: "didLoad" });
      };

      post({ action: "didLoad" });
    </script>
  </head>
  <body>
    <span id="submit" style="visibility: hidden;"></span>
  </body>
</html>
